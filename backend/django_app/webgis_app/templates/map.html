<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modern Accessibility Map</title>
  
  <!-- Bootstrap 5 (CDN) -->
  <link 
    rel="stylesheet" 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  />
  <!-- Bootstrap Icons for button icons -->
  <link 
    rel="stylesheet" 
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />
  
  <style>
    /* Base Reset */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: "Nunito", "Helvetica Neue", Arial, sans-serif;
      background-color: #f8f9fa;
    }

    /* Navbar styling */
    .navbar {
      height: 56px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }

    /* Map container: full screen below navbar */
    .map-container {
      position: relative;
      width: 100%;
      height: calc(100vh - 56px);
      background: #eeeeee;
      overflow: hidden;
    }

    /* Ensure the Folium map fills its container */
    #map {
      width: 100%;
      height: 100%;
    }

    /* Floating container for our three buttons */
    .fab-container {
      display: flex;
      gap: 10px;
      position: absolute;
      z-index: 1000;
    }

    /* Desktop view: center the buttons at the bottom */
    @media (min-width: 768px) {
      .fab-container {
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
      }
    }
    
    /* Mobile view: align buttons in the bottom left */
    @media (max-width: 767.98px) {
      .fab-container {
        bottom: 20px;
        left: 20px;
        transform: none;
      }
    }
    
    /* Button styling (similar to Leaflet control buttons) */
    .fab-item {
      background-color: #fff;
      color: #333;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.2s;
      position: relative;
    }
    .fab-item:hover {
      background-color: #f2f2f2;
    }
    
    /* Tooltip for each button on hover */
    .fab-item[data-label]:hover::after {
      content: attr(data-label);
      position: absolute;
      right: 60px; /* adjust to position the tooltip */
      background: #fff;
      color: #333;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <!-- Minimal Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <span class="navbar-brand fw-semibold ms-2">
        Modern Accessibility Map
      </span>
      <div class="d-flex">
        <!-- Info button triggers an info modal -->
        <button 
          class="btn btn-outline-light me-2" 
          data-bs-toggle="modal" 
          data-bs-target="#infoModal"
        >
          Πληροφορίες
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Map Container -->
  <div class="map-container">
    <div id="map">
      {{ map|safe }}
    </div>

    <!-- Floating container for three control buttons -->
    <div class="fab-container">
      <!-- Zoom In -->
      <div 
        class="fab-item" 
        data-label="Zoom In" 
        onclick="zoomInMap()"
      >
        <i class="bi bi-zoom-in"></i>
      </div>
      <!-- Zoom Out -->
      <div 
        class="fab-item" 
        data-label="Zoom Out" 
        onclick="zoomOutMap()"
      >
        <i class="bi bi-zoom-out"></i>
      </div>
      <!-- Full Extent -->
      <div 
        class="fab-item" 
        data-label="Full Extent" 
        onclick="fullExtentMap()"
      >
        <i class="bi bi-arrows-fullscreen"></i>
      </div>
    </div>
  </div>

  <!-- Info Modal -->
  <div 
    class="modal fade" 
    id="infoModal" 
    tabindex="-1" 
    aria-labelledby="infoModalLabel" 
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="infoModalLabel">Πληροφορίες</h5>
          <button 
            type="button" 
            class="btn-close" 
            data-bs-dismiss="modal" 
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <h5>Objective</h5>
          <p>
            This project aims to enhance the accessibility of public transportation 
            in Toumpa and Ano Poli by using geospatial data analysis to understand walkability to bus stops.
          </p>
          <h5>Methodology</h5>
          <ul>
            <li><strong>Data Collection:</strong> OSMnx from OpenStreetMap for buildings, streets, bus stops.</li>
            <li><strong>Data Processing:</strong> Clean and align data for analysis with Python scripts.</li>
            <li><strong>Network Analysis:</strong> Compute shortest walking routes linking buildings to bus stops.</li>
            <li><strong>QGIS Application:</strong> Generate static maps that show walking routes and accessibility.</li>
          </ul>
        </div>
        <div class="modal-footer">
          <button 
            type="button" 
            class="btn btn-secondary" 
            data-bs-dismiss="modal"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS Bundle (includes Popper) -->
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>
  
  <script>
    // Example functions for map actions.
    // (Ensure your map object from Folium is globally accessible as "map" if available.)
    function zoomInMap() {
      if (typeof map !== 'undefined' && map.zoomIn) {
        map.zoomIn();
      }
    }
    function zoomOutMap() {
      if (typeof map !== 'undefined' && map.zoomOut) {
        map.zoomOut();
      }
    }
    function fullExtentMap() {
      if (typeof map !== 'undefined' && map.setView) {
        map.setView([40.6401, 22.9444], 13);
      }
    }
  </script>
</body>
</html>
